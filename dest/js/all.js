"use strict";!function(){var n={},a=[];function t(e){if(n[e])return n[e];var t=new Image;t.onload=function(){n[e]=t,i()&&a.forEach(function(e){e()})},n[e]=!1,t.src=e}function i(){var e=!0;for(var t in n)n.hasOwnProperty(t)&&!n[t]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){t(e)}):t(e)},get:function(e){return n[e]},onReady:function(e){a.push(e)},isReady:i}}();var Engine=function(e){var t,n=e.document,a=e.window,i=n.createElement("canvas"),r=i.getContext("2d");function s(){var e=Date.now();!function(e){!function(t){allEnemies.forEach(function(e){e.update(t)}),player.update()}(e)}((e-t)/1e3),function(){var e,t,n=["../images/water-block.png","../images/stone-block.png","../images/stone-block.png","../images/stone-block.png","../images/grass-block.png","../images/grass-block.png"];for(r.clearRect(0,0,i.width,i.height),e=0;e<6;e++)for(t=0;t<5;t++)r.drawImage(Resources.get(n[e]),101*t,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),t=e,a.requestAnimationFrame(s)}i.width=505,i.height=606,n.body.appendChild(i),Resources.load(["../images/stone-block.png","../images/water-block.png","../images/grass-block.png","../images/enemy-bug.png","../images/char-boy.png","../images/skele.png"]),Resources.onReady(function(){t=Date.now(),s()}),e.ctx=r}(void 0);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var game={highScore:1,level:1,lives:3,speedMod:[1,1.5,2,2.5,2,2.3,2.7,2.5,2.7,3]},Enemy=function(){function t(e){_classCallCheck(this,t),this.sprite="images/enemy-bug.png",allEnemies.push(this),this.x=0,this.y=t.startLocation(e),this.speed=t.setSpeed()}return _createClass(t,[{key:"update",value:function(e){this.x+=this.speed*e,515<this.x&&(this.x=-100),(player.y===this.y&&player.x+17>=this.x+1&&player.x+17<=this.x+99||player.y===this.y&&player.x+84>=this.x+1&&player.x+84<=this.x+99)&&collision()}},{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}}],[{key:"setSpeed",value:function(){return(100*Math.random()+125)*game.speedMod[game.level-1]}},{key:"startLocation",value:function(e){switch(e){case 1:return 70;case 2:return 150;case 3:return 230}}}]),t}(),Player=function(){function e(){_classCallCheck(this,e),this.sprite="images/char-boy.png",this.x=202,this.y=390,this.alive=!0}return _createClass(e,[{key:"update",value:function(e){-10===player.y&&levelup()}},{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}},{key:"handleInput",value:function(e){if(!0===player.alive)switch(e){case"left":this.x-=101,this.x<0&&(this.x+=101);break;case"up":this.y-=80,this.y<-10&&(this.y+=80);break;case"right":this.x+=101,404<this.x&&(this.x-=101);break;case"down":this.y+=80,394<this.y&&(this.y-=80)}}}]),e}();function collision(){if(!0===player.alive){var e=document.querySelector(".lives-value");game.lives--,player.sprite="../images/skele.png",player.alive=!1,0===game.lives&&gameReset(),setTimeout(function(){!1===player.alive&&(player.alive=!0,player.sprite="../images/char-boy.png",player.x=202,player.y=390,e.textContent=game.lives)},1500)}}function levelup(){player.x=202,player.y=390;var e=document.querySelector(".level-value"),t=document.querySelector(".highscore-value");if(game.level++,e.textContent=game.level,game.level>game.highScore&&"WIN!"!==game.highScore&&(game.highScore=game.level,t.textContent=game.highScore),5===game.level||8===game.level){if(5===game.level)new Enemy(1);if(8===game.level)new Enemy(2)}11===game.highScore&&(game.highScore="WIN!",t.textContent="WIN",alert("You have Won!!!"),gameReset()),speedSet()}function speedSet(){allEnemies.forEach(function(e){return e.speed=Enemy.setSpeed()})}function gameReset(){var e=document.querySelector(".level-value");game.level=1,e.textContent=game.level,game.lives=3,allEnemies=allEnemies.slice(0,3),speedSet()}var allEnemies=[],player=new Player,enemy1=new Enemy(1),enemy2=new Enemy(2),enemy3=new Enemy(3);document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var audio=new Audio("../audio/Meydn_-_Fae.mp3"),musicButton=document.querySelector(".play-music");musicButton.addEventListener("click",function(){return audio.play()});